/**
 * Mastodon User Timeline Widget
 * Copyright (c) 2017 ÊúâÈôê‰ºöÁ§æ„Ç¢„Çº„ÉÉ„Éà
 * „É©„Ç§„Çª„É≥„Çπ„Å´Èñ¢„Åó„Å¶„ÄÅLICENSE„Éï„Ç°„Ç§„É´„ÇíÂèÇÁÖß‰∏ã„Åï„ÅÑ„ÄÇ
 * see license file for details.
 *
 * @author Azet <http://www.azet.jp>
 * @version 1.07 (also update MastodonAPI.version below)
 * @param object params_
 *    instance_uri    : the instance to fetch messages from
 *    access_token    : widget's application access token (can be generated from http://www.azet.jp/mastodon.wizard/wizard_en.html)
 *    account_id      : user account id to fetch messages of
 *    target_selector : HTML node selector (jquery/css style)
 *    toots_limit     : max toots display count (default 20 like API)
 */

/* constructor >>> */
var MastodonApi = function(params_) {
	
	// endpoint access settings
	this.INSTANCE_URI        = params_.instance_uri;
	this.ACCESS_TOKEN        = params_.access_token;
	this.ACCOUNT_ID          = params_.account_id;
	// optional parameters
	this.toots_limit         = params_.toots_limit || 20;
	this.picIcon             = params_.pic_icon || '[PICTURE]';
	this.boostsCountIcon     = params_.boosts_count_icon || '[Boost]';
	this.favouritesCountIcon = params_.favourites_count_icon || '[Favourite]';

	// display target element
	this.widget = jQuery(params_.target_selector);

	// build the basic widget
	this.makeWidget();
	this.listStatuses();

	// spoiler toggle
	// jQuery event handler
	var toggleSpoiler = function(e_) {
		e_.preventDefault();

		// btn text
		if( jQuery(this).hasClass('spoiler-opened') ) {
			jQuery(this).text(MastodonApi.text.spoilerBtnClosed);
		}
		else {
			jQuery(this).text(MastodonApi.text.spoilerBtnOpened);
		}
		jQuery(this).toggleClass('spoiler-opened');

		// open body
		jQuery(this).parent().next('.spoiler-body').toggle();

	};


	// nsfw toggle
	// jQuery event handler
	var toggleNsfwMedia = function(e_) {
		e_.preventDefault();

		if(jQuery(this).hasClass('nsfw-opened')) {
			// hide image ===
			jQuery(this).css({
				'background' : 'black'
			})
			.text(MastodonApi.text.nsfwViewMsg)
			.removeClass('nsfw-opened');
		}
		else {
			// display image ===
			var img = jQuery(this).attr('data-picpreview-url');
			jQuery(this).css({
				'background'       : 'url('+img+') center center no-repeat'
				,'background-size' : 'cover'
			})
			.text('')
			.addClass('nsfw-opened');
		}

	}


	/**
	 * toggle the display of pictures in a modal-ish fashion
	 *
	 * @author Azet
	 * @param jquery_event e_
	 */
	var toggleMedia = function(e_) {
		e_.preventDefault();

		var link = jQuery(this).attr('href');
		var filter = makeFilter();
		var pic = jQuery('<div class="toot-media-zoom" style="background: url('+link+') 50% 50% no-repeat; background-size: contain;"></div>');
		filter.append(pic);
	};


	var makeFilter = function() {
		var filter = jQuery('<div class="toot-media-filter"></div>');
		filter.click(function(e_) {
			e_.preventDefault();
			jQuery(this).remove();
		});
		jQuery('body').append(filter);
		return filter;
	}


	// spoiler buttons events
	this.widget.on('click', '.btn-spoiler', toggleSpoiler);

	// hidden media display toggle
	this.widget.on('click', '.toot-media-nsfw', toggleNsfwMedia);

	// clicks on media icon links
	this.widget.on('click', '.toot-media-link', toggleMedia);
}
/* <<< end constructor */


/* widget Attributes >>> */
MastodonApi.build = 7;        // later for version comparisons if needed
MastodonApi.version = "1.07"; // display
/* <<< */


/* texts >>> */
MastodonApi.text = {
	spoilerBtnClosed  : "Show more"
	,spoilerBtnOpened : "Show less"
	,nsfwLabel        : "NSFW"
	,nsfwViewMsg      : "Click to view"
};
/* <<< */


/**
 * build timeline widget
 */
MastodonApi.prototype.makeWidget = function() {
	this.widget.addClass('mastodon-timeline');
	this.widget.append(jQuery('<div class="mt-header"><h4>Toots</h4> by <span class="user-link"></span></div>'));
	this.widget.append(jQuery('<div class="mt-body"><div class="mt-loading">loading...</div></div>'));
	this.widget.append(jQuery('<div class="mt-footer"></div>'));
};


/**
 * listing function
 */
MastodonApi.prototype.listStatuses = function() {
	var mapi = this;

	// get request
	jQuery.ajax({
		//url: this.INSTANCE_URI+'/api/v1/accounts/'+this.ACCOUNT_ID+'/statuses'
		url: '/utils/mastodon-widget.php'
		,headers: {
			Authorization : 'Bearer '+this.ACCESS_TOKEN
		}
		,method : 'GET'
		,dataType: 'json'
		,data : {
			limit : this.toots_limit
		}
		,success: function(data_) {
			// clear the loading message
			jQuery('.mt-body', mapi.widget).html("");
			//console.log( data_ );

			// add posts
			for(var i in data_) {
				if(i==0) {
					// update user link only at first post
					var account = data_[i].account;
					setHeaderUserLink.call(mapi, account);
					setFooterLink.call(mapi, account);
				}
				if(data_[i].visibility=='public') {
					// list only public toots
					appendStatus.call(mapi, data_[i]);
				}
			}

			// fix content link target
			jQuery('a', mapi.widget).attr('target', '_blank');
		}
		,error: function(d_) {
			//console.log( d_ );
			if(d_.responseJSON) {
				jQuery('.mt-header', mapi.widget).html('ERROR');
				jQuery('.mt-body', mapi.widget).html( '<div class="mt-error">' + d_.responseJSON.error + '</div>');
			}
		}
	});


	/**
	 * add user link
	 * @param object account_
	 */
	var setHeaderUserLink = function(account_) {
		// set user name and link
		jQuery('.user-link', this.widget).append("<a href='"+account_.url+"'>@"+account_.username+"</a>");
	};


	/**
	 * add user link
	 * @param object account_
	 */
	var setFooterLink = function(account_) {
		var domain = this.INSTANCE_URI.replace(/https?:\/\//, '');
		jQuery('.mt-footer', this.widget).append("View on <a href='"+account_.url+"'>"+domain+"</a>");
	};


	/**
	 * inner function to add each message in container
	 * @param object status_
	 */
	var appendStatus = function(status_) {
		//console.log( status_ );
		var content;
		var date, url, avatar, user;

		// dealing with spoiler content
		if(status_.spoiler_text != "") {
			// handle spoilers
			//content.wrap('<div class="spoiler"></div>');
			content = jQuery(
				'<div class="spoiler-header">'+status_.spoiler_text+'<a class="btn-spoiler" href="#open-spoiler">'+MastodonApi.text.spoilerBtnClosed+'</a></div>'+
				'<div class="spoiler-body toot-text">'+status_.content+'</div>' +
				'<div class="toot-medias"></div>'
			);
		}
		else {
			content = jQuery("<div class='toot-text'>" + status_.content + "</div>" + "<div class='toot-medias'></div>");
		}

		if(status_.reblog) {
			// data from BOOSTED status

			// toot date
			date = prepareDateDisplay(status_.reblog.created_at);

			// toot url
			url = status_.reblog.url;

			// boosted avatar
			avatar = jQuery("<div class='mt-avatar mt-avatar-boosted'></div>");
			avatar.css(makeAvatarCss(status_.reblog.account.avatar));

			// booster avatar
			var boosterAvatar = jQuery("<div class='mt-avatar mt-avatar-booster'></div>");
			boosterAvatar.css(makeAvatarCss(status_.account.avatar));
			avatar.append(boosterAvatar);

			// user name and url
			user = jQuery("<div class='mt-user'><a href='"+status_.reblog.account.url+"'>"+status_.reblog.account.username+"</a></div>");
		}
		else {
			// data from status

			// toot date
			date = prepareDateDisplay(status_.created_at);

			// toot url
			url = status_.url;

			// avatar
			avatar = jQuery("<div class='mt-avatar'></div>");
			avatar.css(makeAvatarCss(status_.account.avatar));

			// user name and url
			user = jQuery("<div class='mt-user'><a href='"+status_.account.url+"'>"+status_.account.username+"</a></div>");
		}

		// format date
		var timestamp = jQuery("<div class='mt-date'><a href='"+url+"'>" + date + "</a></div>");

		// sensitive content
		if(status_.sensitive) {
			timestamp.prepend('<span class="nsfw">' + MastodonApi.text.nsfwLabel + '</span>');
		}

		// status container
		var toot = jQuery("<div class='mt-toot'></div>");

		// add to HTML

		if(status_.reblog) {
			toot.append("<div class='toot-retoot'>"+ this.boostsCountIcon +"</div>");
		}

		toot.append( avatar );
		toot.append( user );
		toot.append( timestamp );
		toot.append( content );
		jQuery('.mt-body', this.widget).append(toot);

		// media attachments? >>>
		if(status_.media_attachments.length>0) {
			var pic;
			for(var picid in status_.media_attachments) {
				pic = this.replaceMedias(content, status_.media_attachments[picid], status_.sensitive);
				toot.append( pic );
			}
		}
		// <<<

		// stats (boosts + favourites counts) >>>
		// data
		var boostsCountIcon     = '<span class="toot-status-boosts">'     + this.boostsCountIcon     +":"+ status_.reblogs_count    + '</span>';
		var favouritesCountIcon = '<span class="toot-status-favourites">' + this.favouritesCountIcon +":"+ status_.favourites_count + '</span>';

		// html nodes
		var statusBar = jQuery('<div class="toot-status">' +
			boostsCountIcon +
			favouritesCountIcon +
			'</div>');

		toot.append( statusBar );
		// <<<
	};


	/**
	 * display toot time
	 *
	 * @author Azet
	 * @param StringDate date_ (standard time format)
	 * @return String
	 */
	var prepareDateDisplay = function(date_) {
		var displayTime = "";

		//var now  = new Date();
		var date = new Date( date_ );

		displayTime = date.getFullYear()
			+"/"+(date.getMonth()+1)
			+"/"+date.getDate()
			+" "+date.getHours()
			+":"+("0"+date.getMinutes()).replace(/0(\d{2})/, "$1")
		;

		return displayTime;
	};


	/**
	 * simple method that sets CSS attributes for the avatar
	 * @param string avatar_ url of the avatar picture to apply
	 * @return object css properties to apply with jQuery.css method
	 */
	var makeAvatarCss = function(avatar_) {
		return {
			'background' : "white url('"+avatar_+"') 50% 50% no-repeat"
			,'background-size' : 'contain'
		};
	};

};


/**
 * replace media (pictures) in text with an icon and appends a preview
 *
 * @author Azet
 * @param jquery_object content
 * @param object media_ (received with toot's JSON data)
 * @param bool nsfw_ indicates the media is not to be displayed
 * @return object modifier content object
 */
MastodonApi.prototype.replaceMedias = function(content, media_, nsfw_) {
	var nsfw = nsfw_ || false;

	// icon in place of link in content
	var icon = '<a href="'+media_.url+'" class="toot-media-link" target="_blank">'+this.picIcon+'</a>';
	jQuery('a[href="'+media_.text_url+'"]', content).replaceWith(icon);

	if(nsfw) {
		// pics hidden
		var pic = '<div class="toot-media-preview toot-media-nsfw" style="background:black;" data-picpreview-url="'+media_.preview_url+'">' +
			MastodonApi.text.nsfwViewMsg +
			'</div>';
	}
	else {
		// pics visible
		var pic = '<div class="toot-media-preview" style="background-image:url('+media_.preview_url+');"></div>';
	}

	return pic;
};

R”Pú           `OˇB¬<`QPó   x    O^partitionKey=%28https%2Cpine64.org%29,:https://www.pine64.org/wp-content/themes/pine64/js/mastodon.widget.js?ver=1.0.2 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Server: nginx/1.17.10 (Ubuntu)
Date: Tue, 16 Mar 2021 00:43:07 GMT
Content-Type: application/javascript
Content-Length: 10755
Last-Modified: Fri, 15 Jan 2021 18:58:24 GMT
ETag: "6001e5d0-2a03"
Expires: Wed, 17 Mar 2021 00:43:07 GMT
Cache-Control: max-age=86400
Accept-Ranges: bytes
Access-Control-Allow-Origin: *
 original-response-headers Server: nginx/1.17.10 (Ubuntu)
Date: Tue, 16 Mar 2021 00:43:07 GMT
Content-Type: application/javascript
Content-Length: 10755
Connection: keep-alive
Last-Modified: Fri, 15 Jan 2021 18:58:24 GMT
ETag: "6001e5d0-2a03"
Expires: Wed, 17 Mar 2021 00:43:07 GMT
Cache-Control: max-age=86400
Accept-Ranges: bytes
Access-Control-Allow-Origin: *
 ctid 2 uncompressed-len 0 net-response-time-onstart 5403 net-response-time-onstop 5406   *